<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VIP Restaurant | Admin Panel</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<style>
:root{--gold:#D4AF37;--dark:#050505}
body{font-family:'Poppins',sans-serif;background:var(--dark);color:#fff;margin:0;padding-bottom:90px}
header{padding:20px;text-align:center;background:#000;border-bottom:2px solid var(--gold)}
.admin-box{background:#111;padding:15px;border-radius:12px;border:1px dashed #444;margin:15px}
.admin-input,textarea{width:100%;padding:12px;margin-bottom:10px;border-radius:8px;border:none;background:#000;color:#fff;box-sizing:border-box}
.btn-gold{background:var(--gold);color:#000;padding:12px;border-radius:50px;font-weight:bold;border:none;cursor:pointer;width:100%}
#menu-page{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#000;z-index:2000;overflow-y:auto;padding:20px;box-sizing:border-box}
.item-row{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid #222}
</style>
</head>
<body>
<header><h1 style="font-family:Cinzel;color:var(--gold);margin:0;">VIP RESTAURANT</h1></header>

<div class="admin-box">
<h3 style="color:var(--gold);margin-top:0;">PHOTO UPLOAD (ADMIN ONLY)</h3>
<input type="file" id="f1" class="admin-input" accept="image/*" multiple>
<button class="btn-gold" onclick="secureAction(upPhoto)">UPLOAD PHOTOS</button>
</div>

<button class="btn-gold" style="width:90%;margin:10px auto;display:block;" onclick="openMenu()">OPEN DIGITAL MENU</button>

<div id="menu-page">
<span onclick="closeMenu()" style="position:fixed;right:20px;top:10px;font-size:35px;color:var(--gold);cursor:pointer">&times;</span>
<div id="menu-content" style="margin-top:40px"></div>

<div class="admin-box">
<h3 style="color:var(--gold);">BULK ADD MENU</h3>
<input type="text" id="cat" class="admin-input" placeholder="Category (e.g. BIRYANI)">
<textarea id="bulkData" rows="6" placeholder="Dish Name, Price (one per line)"></textarea>
<button class="btn-gold" onclick="secureAction(bulkAdd)">ADD ITEMS</button>
<button class="btn-gold" style="background:#ff4444;margin-top:10px" onclick="secureAction(clearMenu)">CLEAR MENU</button>
</div>
</div>

<script>
const PASS_HASH = "7679"; // simple lock (client-side)
let isAdmin = sessionStorage.getItem("vipAdmin") === "yes";

function secureAction(fn){
 if(!isAdmin){
  const p = prompt("Enter Admin Password");
  if(p !== PASS_HASH){ alert("Access Denied"); return; }
  sessionStorage.setItem("vipAdmin","yes");
  isAdmin = true;
 }
 fn();
}

window.onload=()=>loadM();
function openMenu(){document.getElementById("menu-page").style.display="block"}
function closeMenu(){document.getElementById("menu-page").style.display="none"}

function upPhoto(){
 const files=document.getElementById("f1").files;
 if(!files.length){alert("Select photos first");return}
 let photos=JSON.parse(localStorage.getItem("vipPhotos")||"[]");
 Array.from(files).forEach(f=>{const r=new FileReader();r.onload=e=>{photos.push(e.target.result);localStorage.setItem("vipPhotos",JSON.stringify(photos))};r.readAsDataURL(f)});
 alert("Photos uploaded successfully");
}

function bulkAdd(){
 let c=document.getElementById("cat").value.trim().toUpperCase();
 let t=document.getElementById("bulkData").value.trim();
 if(!c||!t){alert("Category and items required");return}
 let d=JSON.parse(localStorage.getItem("vipMenu")||"{}");
 if(!d[c])d[c]=[];
 t.split('\n').forEach(l=>{let p=l.split(',');if(p.length>=2)d[c].push({n:p[0].trim(),pr:p[1].trim()})});
 localStorage.setItem("vipMenu",JSON.stringify(d));
 document.getElementById("bulkData").value="";
 loadM();
 alert("Menu updated");
}

function clearMenu(){
 if(confirm("Delete full menu?")){localStorage.removeItem("vipMenu");loadM()}
}

function loadM(){
 let d=JSON.parse(localStorage.getItem("vipMenu")||"{}");
 let h="";
 for(let c in d){h+=`<div style="color:var(--gold);margin-top:20px;font-weight:bold">${c}</div>`;d[c].forEach(i=>{h+=`<div class="item-row"><b>${i.n}</b><span>${i.pr}</span></div>`})}
 document.getElementById("menu-content").innerHTML=h||"<p>No menu added</p>";
}
</script>
</body>
</html>
